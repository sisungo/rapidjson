From 1b00eeb7d89a31c88f3eb6a8c95e7d0466be1512 Mon Sep 17 00:00:00 2001
From: sisungo <sisungo@icloud.com>
Date: Sat, 6 Sep 2025 09:21:07 +0800
Subject: [PATCH] support RISC-V compiler

---
 CMakeLists.txt | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 9cbc796..23df6b2 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -53,7 +53,7 @@ if ("${CMAKE_CXX_COMPILER_ID}" STREQUAL "GNU")
     if(NOT CMAKE_CROSSCOMPILING)
     if(${CMAKE_SYSTEM_PROCESSOR} STREQUAL "powerpc" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "ppc64" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "ppc64le")
       set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mcpu=native")
-    else()
+    elseif(NOT ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "riscv32" AND NOT ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "riscv64")
       #FIXME: x86 is -march=native, but doesn't mean every arch is this option. To keep original project's compatibility, I leave this except POWER.
       set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -march=native")
     endif()
-- 
2.50.1

